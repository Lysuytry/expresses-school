{"version":3,"sources":["../../../src/api/student/student.middleware.js"],"names":["Joi","objectId","createStudentValidator","object","keys","first","string","required","last","gender","birthday","email","telephone","alphanum","subjects","array","items","updateStudentValidator","validateCreatingStudent","req","res","next","body","error","validate","fail","message","validateUpdatingStudent"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEAA,cAAIC,QAAJ,GAAe,2BAASD,aAAT,CAAf;;AAEA,MAAME,yBAAyBF,cAAIG,MAAJ,GAAaC,IAAb,CAAkB;AAC/CC,SAAOL,cAAIM,MAAJ,GAAaC,QAAb,EADwC;AAE/CC,QAAMR,cAAIM,MAAJ,GAAaC,QAAb,EAFyC;AAG/CE,UAAQT,cAAIM,MAAJ,GAAaC,QAAb,EAHuC;AAI/CG,YAAUV,cAAIM,MAAJ,GAAaC,QAAb,EAJqC;AAK/CI,SAAOX,cAAIM,MAAJ,GAAaK,KAAb,GAAqBJ,QAArB,EALwC;AAM/CK,aAAWZ,cAAIM,MAAJ,GAAaO,QAAb,GAAwBN,QAAxB,EANoC;AAO/CO,YAAUd,cAAIe,KAAJ,GAAYC,KAAZ,CAAkBhB,cAAIC,QAAJ,EAAlB;AAPqC,CAAlB,CAA/B;;AAUA,MAAMgB,yBAAyBjB,cAAIG,MAAJ,GAAaC,IAAb,CAAkB;AAC/CC,SAAOL,cAAIM,MAAJ,EADwC;AAE/CE,QAAMR,cAAIM,MAAJ,EAFyC;AAG/CG,UAAQT,cAAIM,MAAJ,EAHuC;AAI/CI,YAAUV,cAAIM,MAAJ,EAJqC;AAK/CK,SAAOX,cAAIM,MAAJ,GAAaK,KAAb,EALwC;AAM/CC,aAAWZ,cAAIM,MAAJ,GAAaO,QAAb,EANoC;AAO/CC,YAAUd,cAAIe,KAAJ,GAAYC,KAAZ,CAAkBhB,cAAIC,QAAJ,EAAlB;AAPqC,CAAlB,CAA/B;;AAUO,MAAMiB,4DAA0B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACzD,MAAG;AACD,UAAM,EAAChB,KAAD,EAAQG,IAAR,EAAcC,MAAd,EAAsBC,QAAtB,EAAgCC,KAAhC,EAAuCC,SAAvC,EAAkDE,QAAlD,KAA8DK,IAAIG,IAAxE;AACA,UAAMC,QAAQvB,cAAIwB,QAAJ,CAAa,EAACnB,KAAD,EAAQG,IAAR,EAAcC,MAAd,EAAsBC,QAAtB,EAAgCC,KAAhC,EAAuCC,SAAvC,EAAkDE,QAAlD,EAAb,EAA0EZ,sBAA1E,CAAd;AACAqB,UAAMA,KAAN,KAAgB,IAAhB,GAAuBF,MAAvB,GAAgCD,IAAIK,IAAJ,CAASF,KAAT,CAAhC;AACD,GAJD,CAIE,OAAMA,KAAN,EAAa;AACbH,QAAIK,IAAJ,CAASF,MAAMG,OAAf;AACD;AACF,CARM;;AAUA,MAAMC,4DAA0B,CAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACzD,MAAG;AACD,UAAM,EAAChB,KAAD,EAAQG,IAAR,EAAcC,MAAd,EAAsBC,QAAtB,EAAgCC,KAAhC,EAAuCC,SAAvC,EAAkDE,QAAlD,KAA8DK,IAAIG,IAAxE;AACA,UAAMC,QAAQvB,cAAIwB,QAAJ,CAAa,EAACnB,KAAD,EAAQG,IAAR,EAAcC,MAAd,EAAsBC,QAAtB,EAAgCC,KAAhC,EAAuCC,SAAvC,EAAkDE,QAAlD,EAAb,EAA0EG,sBAA1E,CAAd;AACAM,UAAMA,KAAN,KAAgB,IAAhB,GAAuBF,MAAvB,GAAgCD,IAAIK,IAAJ,CAASF,KAAT,CAAhC;AACD,GAJD,CAIE,OAAMA,KAAN,EAAY;AACZH,QAAIK,IAAJ,CAASF,KAAT;AACD;AACF,CARM","file":"student.middleware.js","sourcesContent":["import Joi from 'joi';\nimport objectid from 'joi-objectid';\n\nJoi.objectId = objectid(Joi);\n\nconst createStudentValidator = Joi.object().keys({\n  first: Joi.string().required(),\n  last: Joi.string().required(),\n  gender: Joi.string().required(),\n  birthday: Joi.string().required(),\n  email: Joi.string().email().required(),\n  telephone: Joi.string().alphanum().required(),\n  subjects: Joi.array().items(Joi.objectId())\n});\n\nconst updateStudentValidator = Joi.object().keys({\n  first: Joi.string(),\n  last: Joi.string(),\n  gender: Joi.string(),\n  birthday: Joi.string(),\n  email: Joi.string().email(),\n  telephone: Joi.string().alphanum(),\n  subjects: Joi.array().items(Joi.objectId())\n});\n\nexport const validateCreatingStudent = (req, res, next) => {\n  try{\n    const {first, last, gender, birthday, email, telephone, subjects} = req.body;\n    const error = Joi.validate({first, last, gender, birthday, email, telephone, subjects}, createStudentValidator);\n    error.error === null ? next() : res.fail(error);\n  } catch(error) {\n    res.fail(error.message);\n  }\n};\n\nexport const validateUpdatingStudent = (req, res, next) => {\n  try{\n    const {first, last, gender, birthday, email, telephone, subjects} = req.body;\n    const error = Joi.validate({first, last, gender, birthday, email, telephone, subjects}, updateStudentValidator);\n    error.error === null ? next() : res.fail(error);\n  } catch(error){\n    res.fail(error);\n  }\n};\n"]}