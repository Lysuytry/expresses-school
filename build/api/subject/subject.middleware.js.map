{"version":3,"sources":["../../../src/api/subject/subject.middleware.js"],"names":["Joi","objectId","createSubjectValidator","object","keys","name","string","required","teachers","array","items","updateSubjectValidator","validateCreatedSubject","req","res","next","body","error","validate","fail","message","validateUpdateSubject","value"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEAA,cAAIC,QAAJ,GAAe,2BAASD,aAAT,CAAf;;AAEA,MAAME,yBAAyBF,cAAIG,MAAJ,GAAaC,IAAb,CAAkB;AAC/CC,QAAML,cAAIM,MAAJ,GAAaC,QAAb,EADyC;AAE/CC,YAAUR,cAAIS,KAAJ,GAAYC,KAAZ,CAAkBV,cAAIC,QAAJ,EAAlB;AAFqC,CAAlB,CAA/B;;AAKA,MAAMU,yBAAyBX,cAAIG,MAAJ,GAAaC,IAAb,CAAkB;AAC/CC,QAAML,cAAIM,MAAJ,EADyC;AAE/CE,YAAUR,cAAIS,KAAJ;AAFqC,CAAlB,CAA/B;;AAKO,MAAMG,0DAAyB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxD,MAAG;AACD,UAAM,EAACV,IAAD,EAAOG,QAAP,KAAmBK,IAAIG,IAA7B;AACA,UAAMC,QAAQjB,cAAIkB,QAAJ,CAAa,EAACb,IAAD,EAAOG,QAAP,EAAb,EAA+BN,sBAA/B,CAAd;AACAe,UAAMA,KAAN,KAAgB,IAAhB,GAAuBF,MAAvB,GAAgCD,IAAIK,IAAJ,CAASF,KAAT,CAAhC;AACD,GAJD,CAIE,OAAMA,KAAN,EAAY;AACZH,QAAIK,IAAJ,CAASF,MAAMG,OAAf;AACD;AACF,CARM;;AAUA,MAAMC,wDAAwB,CAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACvD,MAAG;AACD,UAAM,EAACV,IAAD,EAAOG,QAAP,KAAmBK,IAAIG,IAA7B;AACA,UAAMC,QAAQjB,cAAIkB,QAAJ,CAAa,EAACb,IAAD,EAAOG,QAAP,EAAb,EAA+BG,sBAA/B,CAAd;AACAM,UAAMA,KAAN,KAAgB,IAAhB,GAAuBF,MAAvB,GAAgCD,IAAIK,IAAJ,CAASF,MAAMK,KAAf,CAAhC;AACD,GAJD,CAIE,OAAML,KAAN,EAAY;AACZH,QAAIK,IAAJ,CAASF,MAAMG,OAAf;AACD;AACF,CARM","file":"subject.middleware.js","sourcesContent":["import Joi from 'joi';\nimport objectid from 'joi-objectid';\n\nJoi.objectId = objectid(Joi);\n\nconst createSubjectValidator = Joi.object().keys({\n  name: Joi.string().required(),\n  teachers: Joi.array().items(Joi.objectId())\n});\n\nconst updateSubjectValidator = Joi.object().keys({\n  name: Joi.string(),\n  teachers: Joi.array()\n});\n\nexport const validateCreatedSubject = (req, res, next) => {\n  try{\n    const {name, teachers} = req.body;\n    const error = Joi.validate({name, teachers}, createSubjectValidator);\n    error.error === null ? next() : res.fail(error);\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n\nexport const validateUpdateSubject = (req, res, next) => {\n  try{\n    const {name, teachers} = req.body;\n    const error = Joi.validate({name, teachers}, updateSubjectValidator);\n    error.error === null ? next() : res.fail(error.value);\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n"]}